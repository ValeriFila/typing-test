{"version":3,"file":"main.70fc63a36de9dd4e610c.hot-update.js","mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,uEAAuE,QAAQ;AAC/E;AACA;AACA,uEAAuE,sBAAsB;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,UAAU,IAAI,OAAO;AAChF,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;;;;;;;;UCtIA","sources":["webpack:///./src/main.js","webpack:///webpack/runtime/getFullHash"],"sourcesContent":["const URL='https://fish-text.ru/get?format=html&number=1'\r\nconst textContent = document.getElementById('text')\r\nconst pointsSpan = document.getElementById('points')\r\nconst loadingSpan = document.getElementById('loading')\r\nconst prec = document.getElementById('precision')\r\n\r\nlet timeoutText\r\nlet intervalTitle\r\nlet arrayOfLetters\r\nlet correctAnswers\r\n\r\n\r\nconst fetchRandomText = url => {\r\n    return new Promise(resolve => {\r\n        const fetchedText = fetch(url)\r\n        resolve(fetchedText)\r\n    })\r\n}\r\n\r\nfetchRandomText(URL)\r\n    .then((fetchedData) => {\r\n        return fetchedData.text()\r\n    })\r\n    .then((data) => {\r\n        const arrayLength = data.length\r\n        console.log(arrayLength)\r\n        arrayOfLetters = data.split('').slice(3, arrayLength - 4)\r\n        correctAnswers = arrayOfLetters.length\r\n    })\r\n    .then(() => {\r\n        return new Promise((resolve ,reject) => {\r\n            loadText(arrayOfLetters)\r\n            setTimeout(() => resolve(), 3000)\r\n        })\r\n    })\r\n    .then(() => {\r\n        clearTimeout(timeoutText)\r\n        clearInterval(intervalTitle)\r\n        loadingSpan.textContent = 'Текст загружен'\r\n        pointsSpan.textContent = ''\r\n        loadingSpan.classList.add('smooth-hide')\r\n        setAttributesForFirstElement()\r\n    })\r\n    .catch(e => console.error(e))\r\n\r\nlet counter = 2\r\nfunction checkLetterForListener (event){\r\n    let currentElem = document.getElementById('current-element')\r\n    let requiredNextElement = document.getElementsByClassName(`letter${counter}`)\r\n    let nextElem = requiredNextElement[0]\r\n\r\n    let requiredLastElement = document.getElementsByClassName(`letter${arrayOfLetters.length}`)\r\n    let lastElement = requiredLastElement[0]\r\n    lastElement.setAttribute('id', 'last-element')\r\n\r\n    if (currentElem.textContent === event.key) {\r\n        currentElem.classList.remove('active-letter', 'wrong-letter')\r\n        currentElem.classList.add('correct-letter')\r\n        currentElem.removeAttribute('id')\r\n        if (currentElem === lastElement) {\r\n            document.removeEventListener('keydown', checkLetterForListener)\r\n            return\r\n        }\r\n        nextElem.setAttribute('id', 'current-element')\r\n        nextElem.classList.add('active-letter')\r\n        counter++\r\n    } else if (event.key === 'Shift' || event.key === 'Control' || event.key === 'Alt' || event.key === 'Tab' || event.key === 'Enter' || event.key === 'Backspace' || event.key === 'AltGraph') {\r\n\r\n    } else {\r\n        if (currentElem.classList.contains('active-letter')) {\r\n            countPrecision(currentElem.textContent, event.key, arrayOfLetters)\r\n        }\r\n        currentElem.classList.remove('active-letter')\r\n        currentElem.classList.add('wrong-letter')\r\n\r\n    }\r\n}\r\n\r\nfunction setAttributesForFirstElement() {\r\n    const firstElement = document.querySelector('span')\r\n    firstElement.setAttribute('id', 'current-element')\r\n    firstElement.classList.add('active-letter')\r\n\r\n    document.addEventListener('keydown', checkLetterForListener)\r\n}\r\n\r\nfunction loadText(array) {\r\n    timeoutText = setTimeout(() => {\r\n        array.forEach((letter, index) => {\r\n            textContent.innerHTML += `<span class=\"letter${index + 1}\">${letter}</span>`\r\n        })\r\n    }, 3000)\r\n\r\n    intervalTitle = setInterval(() => {\r\n            switch (pointsSpan.textContent) {\r\n                case '...': pointsSpan.textContent = '.'\r\n                    break;\r\n                case '.': pointsSpan.textContent = '..'\r\n                    break;\r\n                default: pointsSpan.textContent = '...'\r\n            }\r\n    },500)\r\n}\r\n\r\nlet precision\r\nfunction countPrecision(curElem, pressedKey, array) {\r\n    if (curElem !== pressedKey) {\r\n        correctAnswers = correctAnswers - 1\r\n    }\r\n    precision = (correctAnswers / array.length * 100).toFixed(1)\r\n    prec.textContent = precision + '%'\r\n}\r\n\r\n//1 вариант функции\r\n// async function loadTextContent() {\r\n//     const RESPONSE = await fetch(URL)\r\n//     const TEXT_FROM_RESPONSE = await RESPONSE.text()\r\n//     let arrayLength = TEXT_FROM_RESPONSE.length\r\n//     arrayOfLetters = TEXT_FROM_RESPONSE.split(\"\").slice(3, arrayLength - 4)\r\n//\r\n//     const promise = new Promise((resolve, reject) => {\r\n//         loadText(arrayOfLetters)\r\n//         setTimeout(() => {\r\n//             resolve()\r\n//         }, 3000)\r\n//     })\r\n//     promise.then(() => {\r\n//         clearTimeout(timeoutText)\r\n//         clearInterval(intervalTitle)\r\n//         LOADING_SPAN.textContent = 'Текст загружен'\r\n//         POINTS_SPAN.textContent = ''\r\n//         LOADING_SPAN.classList.add('smooth-hide')\r\n//         setAttributesForFirstElement()\r\n//     })\r\n// }","__webpack_require__.h = () => (\"ac7e3e3f000bc4e463b9\")"],"names":[],"sourceRoot":""}